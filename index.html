<!DOCTYPE html>
<html>
<head>
    <title>Open Venmo</title>
    <script>
        function getVenmoDeeplink(recipient, amount, noteBase) {
            const now = new Date();
            const pad = n => n.toString().padStart(2, '0');
            const timestamp = `${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())} ${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
            const note = encodeURIComponent(`${noteBase} ${timestamp}`);
            return `venmo://paycharge?txn=pay&recipients=${recipient}&amount=${amount}&note=${note}`;
        }

        // Automatically redirect
        window.location.href = getVenmoDeeplink("IronCarrot", "0,1", "test payment");
    </script>
</head>
<body>
    <p>如果 Venmo 没有自动打开，请点击这里：<a id="venmo-link" href="#">打开 Venmo</a></p>
    <script>
        document.getElementById('venmo-link').href = getVenmoDeeplink("IronCarrot", "38.9", "generalpot");
    </script>
</body>
</html>
